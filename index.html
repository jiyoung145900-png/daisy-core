<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>법인 중요 문서 열람 시스템</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        /* --- 기본 설정 및 변수 --- */
        :root {
            --a4-width: 210mm;
            --a4-height: 297mm;
            --seal-red: #b82323; /* 실제 인주와 비슷한 깊은 붉은색 */
            --paper-color: #fffefc; /* 아주 약간 미색이 도는 종이 질감 */
            --text-color: #222;
            --gold-border: #c3a77a; /* 사업자등록증 금테 색상 */
        }
        /* 궁서체 폰트 로드 (없을 경우 바탕체 계열 사용) */
        @font-face {
            font-family: 'OfficialGungsuh';
            src: local('Gungsuh'), local('궁서'), local('Batang'), serif;
        }
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            margin: 0;
            background-color: #e9ecef; /* 배경은 어둡게 처리하여 문서 집중도 향상 */
            padding: 30px;
        }

        /* --- 컨트롤 패널 (인쇄/캡처 시 숨김) --- */
        .control-panel {
            background-color: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            border: 1px solid #ddd;
        }
        .control-title {
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 20px;
            font-weight: bold;
            color: #333;
            text-align: center;
        }
        .input-row {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
        }
        .input-group {
            flex: 1;
        }
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 14px;
            color: #555;
        }
        .input-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 15px;
        }
        .btn-area {
            text-align: center;
            margin-top: 25px;
        }
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background-color 0.2s;
        }
        .btn-primary { background-color: #0056b3; color: white; }
        .btn-primary:hover { background-color: #004494; }
        .btn-success { background-color: #28a745; color: white; margin-bottom: 20px; }
        .btn-success:hover { background-color: #218838; }
        .btn-secondary { background-color: #6c757d; color: white; }
        .btn-secondary:hover { background-color: #5a6268; }

        /* --- 탭 메뉴 --- */
        .tabs {
            display: flex;
            max-width: var(--a4-width);
            margin: 0 auto 0 auto;
            background: #fff;
            border-radius: 12px 12px 0 0;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        }
        .tab-btn {
            flex: 1;
            padding: 15px;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 18px;
            font-weight: bold;
            color: #777;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }
        .tab-btn.active {
            background: #fff;
            color: #0056b3;
            border-bottom: 3px solid #0056b3;
        }

        /* --- 문서 컨테이너 및 공통 스타일 --- */
        .document-container {
            width: var(--a4-width);
            height: var(--a4-height);
            margin: 0 auto;
            background-color: var(--paper-color);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            box-sizing: border-box;
            position: relative;
            display: none; /* 기본 숨김 */
        }
        .document-container.active {
            display: block;
        }
        /* 리얼한 도장 스타일 (핵심) */
        .real-seal {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-family: 'OfficialGungsuh', serif;
            font-weight: bold;
            color: var(--seal-red);
            border: 4px solid var(--seal-red);
            line-height: 1.1;
            z-index: 10;
            /* 인주가 종이에 스며든 느낌 */
            mix-blend-mode: multiply;
            opacity: 0.92;
            /* 약간의 회전으로 자연스러움 추가 */
            transform: rotate(-1.5deg);
            /* 도장 외곽선이 약간 거칠게 보이도록 그림자 추가 */
            box-shadow: inset 0 0 2px rgba(184, 35, 35, 0.3);
        }
        /* 원형 도장 */
        .seal-round {
            border-radius: 50%;
        }
        /* 사각형 직인 */
        .seal-rect {
            border-radius: 4px;
            border-width: 5px;
        }

        /* =========================================
           1. 사용인감계 (Official Seal Usage Declaration)
        ========================================= */
        #stampDoc {
            padding: 30mm 25mm;
        }
        #stampDoc h1 {
            text-align: center;
            font-size: 36px;
            font-family: 'OfficialGungsuh', serif;
            margin-bottom: 50px;
            letter-spacing: 15px;
            color: #000;
            text-decoration: underline;
            text-underline-offset: 10px;
        }
        .section-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            border-left: 5px solid #555;
            padding-left: 10px;
            color: #333;
        }
        .doc-text {
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 20px;
            text-align: justify;
        }
        /* 인감 테이블 */
        .seal-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 40px;
            border: 2px solid #333;
        }
        .seal-table th, .seal-table td {
            border: 1px solid #777;
            padding: 15px;
            text-align: center;
            vertical-align: middle;
        }
        .seal-table th {
            background-color: #f0f0f0;
            font-weight: bold;
            font-size: 17px;
        }
        .seal-box {
            height: 140px;
            position: relative;
            background-color: #fff;
        }
        .seal-placeholder-text {
            position: absolute;
            bottom: 10px;
            width: 100%;
            color: #aaa;
            font-size: 14px;
        }
        /* 정보 테이블 */
        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 40px;
            border-top: 2px solid #333;
        }
        .info-table th, .info-table td {
            border-bottom: 1px solid #ccc;
            padding: 12px 10px;
            font-size: 16px;
        }
        .info-table th {
            background-color: #f9f9f9;
            width: 130px;
            font-weight: bold;
            color: #555;
        }
        .info-table td {
            color: #000;
            font-weight: 500;
        }
        /* 하단 서명부 */
        .footer-section {
            margin-top: 60px;
            text-align: center;
        }
        .footer-date {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 30px;
        }
        .company-sign {
            display: inline-block;
            text-align: left;
            position: relative;
            padding-right: 90px; /* 도장 공간 */
        }
        .company-sign p {
            margin: 8px 0;
            font-size: 17px;
        }
        .recipient-section {
            margin-top: 70px;
            text-align: center;
            font-size: 26px;
            font-weight: bold;
            font-family: 'OfficialGungsuh', serif;
        }

        /* =========================================
           2. 사업자등록증 (Business Registration Certificate)
        ========================================= */
        #bizDoc {
            padding: 25mm;
            /* 국세청 스타일 2중 테두리 */
            border: 5px double var(--gold-border);
            outline: 1px solid #d4c4a8;
            outline-offset: 3px;
            position: relative;
            overflow: hidden;
        }
        /* 배경 워터마크 (대한민국 국세청 로고 및 텍스트) */
        #bizDoc::before {
            content: '대한민국 국세청 National Tax Service';
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) rotate(-30deg);
            font-size: 60px;
            color: rgba(195, 167, 122, 0.15); /* 은은한 금색톤 */
            font-family: 'OfficialGungsuh', serif;
            font-weight: bold;
            z-index: 0;
            pointer-events: none;
            white-space: nowrap;
            text-align: center;
            line-height: 2;
        }
        .biz-content {
            position: relative;
            z-index: 1;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        .biz-header {
            text-align: center;
            margin-bottom: 40px;
        }
        .biz-header h1 {
            font-size: 42px;
            font-family: 'OfficialGungsuh', serif;
            margin: 0 0 15px 0;
            letter-spacing: 10px;
            color: #222;
            text-shadow: 1px 1px 0px rgba(255,255,255,0.8);
        }
        .biz-type {
            font-size: 22px;
            font-weight: bold;
            font-family: 'OfficialGungsuh', serif;
            color: #444;
        }
        /* 사업자 정보 테이블 (국세청 양식) */
        .biz-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 40px;
            border-top: 3px solid var(--gold-border);
            border-bottom: 3px solid var(--gold-border);
        }
        .biz-table th, .biz-table td {
            padding: 14px 10px;
            border-bottom: 1px solid #e0e0e0;
            font-size: 17px;
        }
        .biz-table th {
            background-color: #fcfcfc;
            color: #333;
            font-weight: normal;
            width: 150px;
        }
        .biz-table td {
            font-weight: bold;
            color: #000;
        }
        .biz-num {
            font-size: 24px;
            letter-spacing: 2px;
            font-weight: 800;
            font-family: sans-serif;
        }
        /* 하단 발급 정보 */
        .issue-footer {
            margin-top: auto; /* 하단 고정 */
            text-align: center;
            padding-bottom: 30px;
        }
        .legal-text {
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 50px;
            font-family: 'OfficialGungsuh', serif;
            color: #444;
        }
        .issue-date {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 40px;
        }
        .tax-office-seal-area {
            position: relative;
            display: inline-block;
            padding-right: 120px; /* 직인 영역 확보 */
        }
        .tax-office-name {
            font-size: 34px;
            font-weight: bold;
            font-family: 'OfficialGungsuh', serif;
            letter-spacing: 5px;
            color: #222;
        }

        /* --- 인쇄/저장 시 숨김 처리 --- */
        @media print {
            body { padding: 0; background: #fff; }
            .control-panel, .tabs, .btn-download-wrapper { display: none !important; }
            .document-container {
                box-shadow: none;
                margin: 0;
                page-break-after: always;
                display: block !important;
                /* 배경 그래픽 및 색상 강제 인쇄 */
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }
    </style>
</head>
<body>

<div class="control-panel">
    <h2 class="control-title">문서 정보 입력 및 제어</h2>
    <p style="text-align: center; color: #666; margin-bottom: 25px;">
        * 고객님께 보여드릴 내용을 입력 후 <b>[내용 적용하기]</b>를 눌러주세요.
    </p>
    
    <div class="input-row">
        <div class="input-group">
            <label for="docDate">작성일 / 개업연월일 (필수)</label>
            <input type="date" id="docDate" value="2020-03-20">
        </div>
        <div class="input-group">
            <label for="recipientName">수신처 (사용인감계 하단)</label>
            <input type="text" id="recipientName" placeholder="예: (주)고객사 귀중">
        </div>
    </div>

    <div class="btn-area">
        <button class="btn btn-primary" onclick="updateDocuments()">내용 적용하기 (Click)</button>
    </div>
</div>

<div class="tabs">
    <button class="tab-btn active" onclick="showTab('stampDoc')">사용인감계 (법인)</button>
    <button class="tab-btn" onclick="showTab('bizDoc')">사업자등록증 (법인)</button>
</div>

<div id="documentViewer">

    <div id="stampDoc" class="document-container active">
        <div class="btn-download-wrapper" style="text-align: center; padding-top: 20px;">
            <button class="btn btn-success" onclick="downloadImage('stampDoc', '사용인감계_주식회사데이지.png')">이 문서 이미지로 저장</button>
        </div>

        <h1>사 용 인 감 계</h1>

        <div class="section-title">1. 인감 등록 신고</div>
        <div class="doc-text">
            당사는 상법 규정에 의거하여 본점에 등기된 법인인감과, 회사의 통상적인 업무 수행(계약 체결, 서류 제출 등)에 사용할 사용인감을 아래와 같이 신고합니다.
        </div>

        <table class="seal-table">
            <thead>
                <tr>
                    <th style="width: 20%;">구 분</th>
                    <th style="width: 40%;">법인인감 (등기소 등록)</th>
                    <th style="width: 40%;">사용인감 (업무용)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="font-weight: bold; background: #fafafa;">인 영<br>(날 인)</td>
                    <td class="seal-box">
                        <div class="seal-placeholder-text">(법인인감 날인란)</div>
                        <div class="real-seal seal-round" style="width: 90px; height: 90px; font-size: 14px; border-width: 5px; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-2deg);">
                            <span>주식회사<br>데이지<br>대표이사인</span>
                        </div>
                    </td>
                    <td class="seal-box">
                        <div class="seal-placeholder-text">(사용인감 날인란)</div>
                        <div class="real-seal seal-round" style="width: 85px; height: 85px; font-size: 14px; border-width: 3px; border-style: double; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(1deg);">
                            <span>주식회사<br>데이지<br>사용인감</span>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="section-title">2. 신고 업체 정보</div>
        <table class="info-table">
            <tr>
                <th>상 호 명</th>
                <td style="font-size: 18px; font-weight: bold;">주식회사 데이지 (Daisy Co., Ltd.)</td>
            </tr>
            <tr>
                <th>본점 주소</th>
                <td>서울특별시 강남구 테헤란로 521, 20층 (삼성동, 파르나스타워)</td>
            </tr>
            <tr>
                <th>대 표 자</th>
                <td style="position: relative; padding-right: 70px;">
                    성 기 범 &nbsp;&nbsp;(인)
                    <div class="real-seal seal-round" style="width: 55px; height: 55px; font-size: 13px; border-width: 3px; position: absolute; top: 50%; right: 10px; transform: translate(0, -50%) rotate(-3deg);">
                        <span>성기범<br>인</span>
                    </div>
                </td>
            </tr>
        </table>

        <div class="section-title">3. 사용인감 사용에 관한 확약</div>
        <div class="doc-text" style="border: 3px solid #eee; padding: 20px; background: #fafafa;">
            본 신고인이 제출하는 상기 사용인감은 귀사와의 모든 거래 및 계약, 제반 행정 업무를 수행함에 있어 사용될 것임을 신고합니다.<br><br>
            해당 사용인감을 사용하여 날인된 모든 서류는 법인인감을 날인한 것과 동일한 법적 효력을 가짐을 확인하며, 이와 관련하여 발생하는 모든 법적, 재정적 책임은 전적으로 본 회사가 부담할 것을 확약합니다.
        </div>

        <div class="footer-section">
            <div class="footer-date display-date-long">2020년 3월 20일</div>
            
            <div class="company-sign">
                <p>상 &nbsp;&nbsp;&nbsp;호 : 주식회사 데이지</p>
                <p>주 &nbsp;&nbsp;&nbsp;소 : 서울특별시 강남구 테헤란로 521, 20층</p>
                <p style="margin-top: 15px; font-weight: bold;">대표이사 : 성 기 범 &nbsp;&nbsp;(인)</p>
                
                <div class="real-seal seal-round" style="width: 80px; height: 80px; font-size: 13px; border-width: 4px; position: absolute; bottom: -10px; right: 0; transform: rotate(2deg); opacity: 0.95;">
                    <span>주식회사<br>데이지<br>대표이사인</span>
                </div>
            </div>
        </div>

        <div class="recipient-section">
            <span class="display-recipient">관계자 제위</span> 귀중
        </div>
    </div>


    <div id="bizDoc" class="document-container">
        <div class="btn-download-wrapper no-print" style="text-align: center; padding-top: 20px; position: relative; z-index: 10;">
            <button class="btn btn-success" onclick="downloadImage('bizDoc', '사업자등록증_주식회사데이지.png')">이 문서 이미지로 저장</button>
        </div>

        <div class="biz-content">
            <div class="biz-header">
                <h1>사 업 자 등 록 증</h1>
                <div class="biz-type">( 법 인 사 업 자 )</div>
            </div>

            <table class="biz-table">
                <tr>
                    <th>등 록 번 호</th>
                    <td colspan="3" class="biz-num" style="color: #000;">123 - 85 - 67890</td>
                </tr>
                <tr>
                    <th>법인명(단체명)</th>
                    <td style="font-size: 18px;">주식회사 데이지 (Daisy)</td>
                    <th style="text-align: center;">대 표 자</th>
                    <td style="font-size: 18px;">성 기 범</td>
                </tr>
                <tr>
                    <th>개 업 연 월 일</th>
                    <td class="display-date-short" style="font-size: 18px;">2020년 03월 20일</td>
                    <th style="text-align: center;">법인등록번호</th>
                    <td style="font-size: 18px; letter-spacing: 1px;">110111-2345678</td>
                </tr>
                <tr>
                    <th>사업장 소재지</th>
                    <td colspan="3" style="font-size: 18px;">서울특별시 강남구 테헤란로 521, 20층 (삼성동, 파르나스타워)</td>
                </tr>
                <tr>
                    <th>본 점 소 재 지</th>
                    <td colspan="3" style="font-size: 18px;">서울특별시 강남구 테헤란로 521, 20층 (삼성동, 파르나스타워)</td>
                </tr>
                <tr>
                    <th>사 업 의 종 류</th>
                    <td colspan="3" style="padding: 0;">
                        <table style="width: 100%; border-collapse: collapse; border: none;">
                            <tr>
                                <th style="width: 80px; text-align: center; background: #f4f4f4; border-right: 1px solid #e0e0e0; border-bottom: 1px solid #e0e0e0;">업 태</th>
                                <td style="border-bottom: 1px solid #e0e0e0; padding: 12px; font-size: 18px;">서비스업, 정보통신업</td>
                            </tr>
                            <tr>
                                <th style="width: 80px; text-align: center; background: #f4f4f4; border-right: 1px solid #e0e0e0;">종 목</th>
                                <td style="padding: 12px; font-size: 18px;">인터넷 만남 매칭 서비스, 데이터베이스 및 온라인정보제공</td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>

            <div class="issue-footer">
                <div class="legal-text">
                    부가가치세법 제8조 및 동법 시행령 제11조의 규정에 의하여<br>
                    사업자등록을 하였음을 증명합니다.
                </div>
                
                <div class="issue-date display-date-long">2020년 3월 20일</div>
                
                <div class="tax-office-seal-area">
                    <span class="tax-office-name">강 남 세 무 서 장</span>
                    
                    <div class="real-seal seal-rect" style="width: 95px; height: 95px; font-size: 22px; border-width: 6px; position: absolute; top: 50%; right: 0; transform: translate(20%, -50%) rotate(-2deg); background: transparent; letter-spacing: 3px;">
                        <span>강남<br>세무서장<br>인</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
    // === 1. 탭 전환 함수 ===
    function showTab(tabId) {
        // 버튼 활성화 상태 변경
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');

        // 문서 표시 상태 변경
        document.querySelectorAll('.document-container').forEach(page => page.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
    }

    // === 2. 문서 내용 업데이트 함수 ===
    function updateDocuments() {
        const dateInput = document.getElementById('docDate').value;
        const recipientInput = document.getElementById('recipientName').value;

        if (!dateInput) {
            alert('날짜를 입력해주세요.');
            return;
        }

        const date = new Date(dateInput);
        const year = date.getFullYear();
        const month = date.getMonth() + 1;
        const day = date.getDate();
        
        // 날짜 포맷팅 (YYYY년 M월 D일 / YYYY년 MM월 DD일)
        const formattedDateLong = `${year}년 ${month}월 ${day}일`;
        const formattedDateShort = `${year}년 ${String(month).padStart(2, '0')}월 ${String(day).padStart(2, '0')}일`;

        // 문서 내 날짜 업데이트
        document.querySelectorAll('.display-date-long').forEach(el => el.innerText = formattedDateLong);
        document.querySelectorAll('.display-date-short').forEach(el => el.innerText = formattedDateShort);

        // 수신인 업데이트
        if (recipientInput) {
            document.querySelectorAll('.display-recipient').forEach(el => el.innerText = recipientInput);
        } else {
            document.querySelectorAll('.display-recipient').forEach(el => el.innerText = "관계자 제위");
        }

        alert('문서 내용이 적용되었습니다. 화면을 확인하시거나 이미지를 다운로드하세요.');
    }

    // === 3. 고해상도 이미지 다운로드 함수 (html2canvas) ===
    function downloadImage(elementId, fileName) {
        const element = document.getElementById(elementId);
        const downloadBtn = element.querySelector('.btn-download-wrapper');
        
        // 캡처 중 버튼 숨기기
        if(downloadBtn) downloadBtn.style.display = 'none';
        
        // 캡처 시작 알림
        const originalText = event.target.innerText;
        event.target.innerText = "이미지 생성 중... 잠시만 기다려주세요.";
        event.target.disabled = true;

        // 고해상도 캡처 설정
        const scale = window.devicePixelRatio > 1 ? window.devicePixelRatio : 2; // 레티나 디스플레이 대응

        html2canvas(element, {
            scale: scale, 
            useCORS: true,
            logging: false,
            backgroundColor: null, // 배경색 투명하게 처리하여 CSS 배경색 유지
            allowTaint: true,
            scrollY: -window.scrollY // 스크롤 위치 보정
        }).then(canvas => {
            // 이미지 다운로드 트리거
            const image = canvas.toDataURL("image/png");
            const link = document.createElement('a');
            link.download = fileName;
            link.href = image;
            link.click();

            // 버튼 상태 복구
            if(downloadBtn) downloadBtn.style.display = 'block';
            event.target.innerText = originalText;
            event.target.disabled = false;
        }).catch(err => {
             console.error("이미지 캡처 오류:", err);
             alert("이미지 생성 중 오류가 발생했습니다.");
             if(downloadBtn) downloadBtn.style.display = 'block';
             event.target.innerText = originalText;
             event.target.disabled = false;
        });
    }
    
    // 페이지 로드 시 초기값 적용
    window.onload = function() {
        setTimeout(updateDocuments, 300);
    };
</script>

</body>
</html>
