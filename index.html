<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>통합 문서 관리 시스템 (데이지)</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        /* === 폰트 및 기본 설정 === */
        @font-face {
            font-family: 'OfficialGungsuh';
            src: local('Gungsuh'), local('궁서'), local('Batang'), serif;
        }
        :root {
            --a4-width: 210mm;
            --a4-height: 297mm;
            /* 실제 인주 색상: 약간 어둡고 깊은 빨간색 */
            --seal-color: #b82323; 
            /* 종이 질감 배경색 */
            --paper-bg: #fffefc;
            --gold-border: #c3a77a;
        }
        body {
            font-family: 'Malgun Gothic', dotum, sans-serif;
            margin: 0;
            background-color: #555; /* 배경을 어둡게 하여 문서 집중 */
            padding: 30px;
        }

        /* === 컨트롤 패널 (입력폼) === */
        .control-panel {
            background-color: #fff;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            margin-bottom: 30px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        .input-row { display: flex; gap: 20px; margin-bottom: 15px; }
        .input-group { flex: 1; }
        .input-group label { display: block; margin-bottom: 8px; font-weight: bold; }
        .input-group input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; }
        .btn-area { text-align: center; margin-top: 25px; }
        .btn { padding: 12px 24px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: bold; transition: 0.2s; }
        .btn-primary { background-color: #0056b3; color: white; }
        .btn-primary:hover { background-color: #004494; }
        .btn-download { background-color: #28a745; color: white; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .btn-download:hover { background-color: #218838; transform: translateY(-2px); }

        /* === 탭 메뉴 === */
        .tabs { display: flex; max-width: var(--a4-width); margin: 0 auto; background: #fff; border-radius: 8px 8px 0 0; overflow: hidden; }
        .tab-btn { flex: 1; padding: 15px; cursor: pointer; background: #e9ecef; border: none; font-size: 18px; font-weight: bold; color: #666; }
        .tab-btn.active { background: #fff; color: #0056b3; border-bottom: 3px solid #0056b3; }

        /* === 문서 컨테이너 === */
        .document-container {
            width: var(--a4-width);
            height: var(--a4-height);
            margin: 0 auto;
            background-color: var(--paper-bg);
            /* 미세한 종이 질감 패턴 추가 */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.05' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E");
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            box-sizing: border-box;
            position: relative;
            display: none;
        }
        .document-container.active { display: block; }

        /* === ★★★ 진짜 같은 도장 구현 (SVG 필터 + CSS) ★★★ === */
        /* 공통 SVG 도장 스타일 */
        .real-seal-svg {
            position: absolute;
            /* 인주가 종이에 스며든 느낌을 내는 핵심 속성 */
            mix-blend-mode: multiply;
            opacity: 0.9; /* 약간의 투명도 */
            z-index: 10;
            pointer-events: none; /* 클릭 방지 */
        }
        /* 도장 내부 텍스트 스타일 */
        .seal-text {
            font-family: 'OfficialGungsuh', serif;
            font-weight: 900; /* 가장 두껍게 */
            fill: var(--seal-color);
            text-anchor: middle; /* 중앙 정렬 */
            dominant-baseline: central;
        }
        /* 도장 테두리 스타일 */
        .seal-border {
            fill: none;
            stroke: var(--seal-color);
            stroke-width: 5px;
        }

        /* === 사용인감계 스타일 === */
        #stampDoc { padding: 30mm 25mm; }
        #stampDoc h1 { text-align: center; font-size: 36px; font-family: 'OfficialGungsuh', serif; margin-bottom: 50px; text-decoration: underline; text-underline-offset: 10px; letter-spacing: 10px;}
        .section-header { font-size: 18px; font-weight: bold; margin-bottom: 15px; border-left: 5px solid #333; padding-left: 10px; }
        .doc-body-text { font-size: 16px; line-height: 1.8; margin-bottom: 20px; }
        .seal-table { width: 100%; border-collapse: collapse; margin-bottom: 40px; border: 2px solid #000; }
        .seal-table th, .seal-table td { border: 1px solid #555; padding: 10px; text-align: center; vertical-align: middle; }
        .seal-table th { background-color: #f0f0f0; font-weight: bold; }
        .seal-box-cell { height: 150px; position: relative; background: #fff; }
        .info-table { width: 100%; border-collapse: collapse; margin-bottom: 40px; border-top: 2px solid #000; }
        .info-table th, .info-table td { border-bottom: 1px solid #ccc; padding: 12px; font-size: 16px; }
        .info-table th { background-color: #f9f9f9; width: 130px; font-weight: bold; }
        .footer-date { text-align: center; font-size: 20px; font-weight: bold; margin: 50px 0 30px 0; }
        .rep-sign-area { text-align: right; padding-right: 100px; position: relative; font-size: 18px; line-height: 2; }

        /* === 사업자등록증 스타일 === */
        #bizDoc { padding: 25mm; border: 5px double var(--gold-border); outline: 1px solid #ccc; outline-offset: 3px; position: relative; overflow: hidden; }
        #bizDoc::before { content: '대한민국 국세청'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-30deg); font-size: 90px; color: rgba(195, 167, 122, 0.1); font-family: 'OfficialGungsuh', serif; font-weight: bold; pointer-events: none; white-space: nowrap; }
        .biz-header h1 { text-align: center; font-size: 42px; font-family: 'OfficialGungsuh', serif; margin: 0 0 10px 0; letter-spacing: 10px; color: #222; }
        .biz-type { text-align: center; font-size: 22px; font-weight: bold; font-family: 'OfficialGungsuh', serif; margin-bottom: 40px; }
        .biz-table { width: 100%; border-collapse: collapse; margin-bottom: 40px; border-top: 3px solid var(--gold-border); border-bottom: 3px solid var(--gold-border); }
        .biz-table th, .biz-table td { padding: 15px 10px; border-bottom: 1px solid #e0e0e0; font-size: 17px; }
        .biz-table th { background-color: #fcfcfc; width: 150px; color: #555; }
        .biz-table td { font-weight: bold; color: #000; }
        .issue-footer { text-align: center; margin-top: auto; padding-bottom: 20px; font-family: 'OfficialGungsuh', serif; }
        .tax-office-seal-group { display: inline-block; position: relative; padding-right: 110px; margin-top: 40px; }
        .tax-office-name { font-size: 32px; font-weight: bold; }

        @media print {
            body { padding: 0; background: none; }
            .control-panel, .tabs, .btn-download-wrapper { display: none !important; }
            .document-container { margin: 0; box-shadow: none; page-break-after: always; display: block !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }
    </style>
</head>
<body>

<svg style="display: none;">
    <defs>
        <filter id="roughPaper" x="-20%" y="-20%" width="140%" height="140%">
            <feTurbulence type="fractalNoise" baseFrequency="0.04" numOctaves="5" result="noise" />
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="3" xChannelSelector="R" yChannelSelector="G" />
            <feGaussianBlur stdDeviation="0.5" />
        </filter>
    </defs>
</svg>

<div class="control-panel">
    <h2 style="text-align: center;">문서 정보 입력</h2>
    <p style="text-align: center; color: #666;">* 고객님께 보여주기 전, 날짜와 수신인을 입력하고 <b>[내용 적용]</b> 버튼을 눌러주세요.</p>
    <div class="input-row">
        <div class="input-group">
            <label for="docDate">작성일 / 개업연월일 (필수)</label>
            <input type="date" id="docDate" value="2020-03-20">
        </div>
        <div class="input-group">
            <label for="recipientName">수신처 (사용인감계 하단)</label>
            <input type="text" id="recipientName" placeholder="예: 주식회사 OOO 귀중">
        </div>
    </div>
    <div class="btn-area">
        <button class="btn btn-primary" onclick="updateDocuments()">내용 적용 (필수)</button>
    </div>
</div>

<div class="tabs">
    <button class="tab-btn active" onclick="showTab('stampDoc')">사용인감계 (법인)</button>
    <button class="tab-btn" onclick="showTab('bizDoc')">사업자등록증 (법인)</button>
</div>

<div id="documentViewer">

    <div id="stampDoc" class="document-container active">
        <div class="btn-download-wrapper" style="text-align: center; padding-top: 25px;">
            <button class="btn btn-download" onclick="downloadImage('stampDoc', '사용인감계_주식회사데이지.png')">이 문서 고화질 다운로드</button>
        </div>
        
        <h1>사 용 인 감 계</h1>

        <div class="section-header">1. 인감 등록 신고</div>
        <div class="doc-body-text">
            본 회사는 상법 규정에 따라 본점에 등기된 법인인감과, 회사의 통상 업무(계약, 입찰, 기타 서류) 수행 시 사용할 사용인감을 아래와 같이 신고합니다.
        </div>

        <table class="seal-table">
            <thead>
                <tr>
                    <th style="width: 20%;">구 분</th>
                    <th style="width: 40%;">법인인감 (등기소 등록)</th>
                    <th style="width: 40%;">사용인감 (업무용)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td style="font-weight: bold;">인 영<br>(날 인)</td>
                    <td class="seal-box-cell">
                        <div style="position: absolute; bottom: 5px; width: 100%; color: #aaa; font-size: 14px;">(법인인감 날인)</div>
                        
                        <svg class="real-seal-svg" width="100" height="100" viewBox="0 0 100 100" style="top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-2deg);">
                            <g filter="url(#roughPaper)"> <circle cx="50" cy="50" r="48" class="seal-border" stroke-width="4"/> <circle cx="50" cy="50" r="32" class="seal-border" stroke-width="3"/> <path id="corpNamePath" d="M 15,50 A 35,35 0 1,1 85,50" fill="none"/>
                                <text class="seal-text" font-size="13" letter-spacing="1">
                                    <textPath href="#corpNamePath" startOffset="50%" text-anchor="middle">주식회사 데이지</textPath>
                                </text>
                                <text x="50" y="50" class="seal-text" font-size="16">대표이사인</text>
                            </g>
                        </svg>
                    </td>
                    <td class="seal-box-cell">
                        <div style="position: absolute; bottom: 5px; width: 100%; color: #aaa; font-size: 14px;">(사용인감 날인)</div>
                        
                        <svg class="real-seal-svg" width="90" height="90" viewBox="0 0 100 100" style="top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(1.5deg);">
                            <g filter="url(#roughPaper)">
                                <circle cx="50" cy="50" r="47" class="seal-border" stroke-width="5" stroke-dasharray="10, 2"/><text x="50" y="35" class="seal-text" font-size="14">주식회사</text>
                                <text x="50" y="55" class="seal-text" font-size="20" letter-spacing="2">데이지</text>
                                <text x="50" y="75" class="seal-text" font-size="14">사용인감</text>
                            </g>
                        </svg>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="section-header">2. 업체 정보</div>
        <table class="info-table">
            <tr>
                <th>상 호 명</th>
                <td style="font-size: 18px; font-weight: bold;">주식회사 데이지 (Daisy Co., Ltd.)</td>
            </tr>
            <tr>
                <th>본점 주소</th>
                <td>서울특별시 강남구 테헤란로 521, 20층 (삼성동, 파르나스타워)</td>
            </tr>
            <tr>
                <th>대 표 자</th>
                <td style="position: relative; padding-right: 60px;">
                    성 기 범 &nbsp;(인)
                    
                    <svg class="real-seal-svg" width="50" height="50" viewBox="0 0 60 60" style="top: 50%; right: 10px; transform: translate(0, -50%) rotate(-3deg);">
                        <g filter="url(#roughPaper)">
                            <circle cx="30" cy="30" r="28" class="seal-border" stroke-width="3"/>
                            <text x="30" y="22" class="seal-text" font-size="14">성기범</text>
                            <text x="30" y="42" class="seal-text" font-size="14">인</text>
                        </g>
                    </svg>
                </td>
            </tr>
        </table>

        <div class="section-header">3. 사용인감 사용에 관한 확약</div>
        <div class="doc-body-text" style="background: #fafafa; padding: 15px; border: 1px solid #ddd;">
            상기 사용인감은 당사의 업무상 계약 체결, 신청서 제출 등 제반 업무에 사용될 것임을 신고합니다.<br>
            본 사용인감을 사용하여 행해진 모든 행위는 법인인감을 날인한 것과 동일한 법적 효력이 있음을 확인하며, 이로 인해 발생하는 모든 책임은 본 회사가 부담할 것을 확약합니다.
        </div>

        <div class="footer-date display-date-long">2020년 3월 20일</div>

        <div class="rep-sign-area">
            <p>상 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;호 : 주식회사 데이지</p>
            <p>대 표 이 사 : <strong>성 기 범</strong> &nbsp;(인)</p>
            
            <svg class="real-seal-svg" width="80" height="80" viewBox="0 0 100 100" style="bottom: -15px; right: 10px; transform: rotate(2deg); opacity: 0.85;">
                <g filter="url(#roughPaper)">
                    <circle cx="50" cy="50" r="48" class="seal-border" stroke-width="4"/>
                    <circle cx="50" cy="50" r="32" class="seal-border" stroke-width="3"/>
                    <path id="corpNamePath2" d="M 15,50 A 35,35 0 1,1 85,50" fill="none"/>
                    <text class="seal-text" font-size="13" letter-spacing="1">
                        <textPath href="#corpNamePath2" startOffset="50%" text-anchor="middle">주식회사 데이지</textPath>
                    </text>
                    <text x="50" y="50" class="seal-text" font-size="16">대표이사인</text>
                </g>
            </svg>
        </div>

        <div style="margin-top: 60px; text-align: center; font-size: 24px; font-weight: bold; font-family: 'OfficialGungsuh', serif;">
            <span class="display-recipient">관계자 제위</span> 귀중
        </div>
    </div>

    <div id="bizDoc" class="document-container">
        <div class="btn-download-wrapper" style="text-align: center; padding-top: 25px; position: relative; z-index: 20;">
            <button class="btn btn-download" onclick="downloadImage('bizDoc', '사업자등록증_주식회사데이지.png')">이 문서 고화질 다운로드</button>
        </div>

        <div class="biz-header">
            <h1>사 업 자 등 록 증</h1>
            <div class="biz-type">( 법 인 사 업 자 )</div>
        </div>

        <table class="biz-table">
            <tr>
                <th>등 록 번 호</th>
                <td colspan="3" style="font-size: 24px; font-weight: 800; letter-spacing: 2px;">123 - 85 - 67890</td>
            </tr>
            <tr>
                <th>법인명(단체명)</th>
                <td style="font-size: 18px;">주식회사 데이지 (Daisy)</td>
                <th style="text-align: center;">대 표 자</th>
                <td style="font-size: 18px;">성 기 범</td>
            </tr>
            <tr>
                <th>개 업 연 월 일</th>
                <td class="display-date-short" style="font-size: 18px;">2020년 03월 20일</td>
                <th style="text-align: center;">법인등록번호</th>
                <td style="font-size: 18px; letter-spacing: 1px;">110111-2345678</td>
            </tr>
            <tr>
                <th>사업장 소재지</th>
                <td colspan="3" style="font-size: 18px;">서울특별시 강남구 테헤란로 521, 20층 (삼성동, 파르나스타워)</td>
            </tr>
            <tr>
                <th>본 점 소 재 지</th>
                <td colspan="3" style="font-size: 18px;">서울특별시 강남구 테헤란로 521, 20층 (삼성동, 파르나스타워)</td>
            </tr>
            <tr>
                <th>사 업 의 종 류</th>
                <td colspan="3" style="padding: 0;">
                    <table style="width: 100%; border-collapse: collapse; border: none;">
                        <tr>
                            <th style="width: 90px; text-align: center; background: #f4f4f4; border-right: 1px solid #e0e0e0; border-bottom: 1px solid #e0e0e0;">업 태</th>
                            <td style="border-bottom: 1px solid #e0e0e0; padding: 12px; font-size: 18px;">서비스업</td>
                        </tr>
                        <tr>
                            <th style="width: 90px; text-align: center; background: #f4f4f4; border-right: 1px solid #e0e0e0;">종 목</th>
                            <td style="padding: 12px; font-size: 18px;">인터넷 만남 매칭 서비스, 데이터베이스 제공</td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>

        <div class="issue-footer">
            <div style="font-size: 18px; line-height: 1.8; margin-bottom: 40px; color: #444;">
                부가가치세법 제8조 및 동법 시행령 제11조의 규정에 의하여<br>
                사업자등록을 하였음을 증명합니다.
            </div>
            
            <div class="display-date-long" style="font-size: 22px; font-weight: bold; margin-bottom: 40px;">2020년 3월 20일</div>
            
            <div class="tax-office-seal-group">
                <span class="tax-office-name">강 남 세 무 서 장</span>
                
                <svg class="real-seal-svg" width="100" height="100" viewBox="0 0 100 100" style="top: 50%; right: 0; transform: translate(20%, -50%) rotate(-2deg);">
                    <g filter="url(#roughPaper)">
                        <rect x="5" y="5" width="90" height="90" class="seal-border" stroke-width="6"/>
                        <text x="50" y="35" class="seal-text" font-size="20">강남</text>
                        <text x="50" y="60" class="seal-text" font-size="20">세무서장</text>
                        <text x="50" y="85" class="seal-text" font-size="20">인</text>
                    </g>
                </svg>
            </div>
        </div>
    </div>

</div>

<script>
    // 탭 전환
    function showTab(tabId) {
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        document.querySelectorAll('.document-container').forEach(page => page.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
    }

    // 문서 내용 업데이트
    function updateDocuments() {
        const dateInput = document.getElementById('docDate').value;
        const recipientInput = document.getElementById('recipientName').value;

        if (!dateInput) { alert('날짜를 입력해주세요.'); return; }

        const date = new Date(dateInput);
        const formattedDateLong = `${date.getFullYear()}년 ${date.getMonth() + 1}월 ${date.getDate()}일`;
        const formattedDateShort = `${date.getFullYear()}년 ${String(date.getMonth() + 1).padStart(2, '0')}월 ${String(date.getDate()).padStart(2, '0')}일`;

        document.querySelectorAll('.display-date-long').forEach(el => el.innerText = formattedDateLong);
        document.querySelectorAll('.display-date-short').forEach(el => el.innerText = formattedDateShort);

        if (recipientInput) {
            document.querySelectorAll('.display-recipient').forEach(el => el.innerText = recipientInput);
        } else {
            document.querySelectorAll('.display-recipient').forEach(el => el.innerText = "관계자 제위");
        }
        alert('문서에 내용이 적용되었습니다. 도장의 질감을 확인해보세요.');
    }

    // 고해상도 이미지 다운로드 (SVG 필터 지원)
    function downloadImage(elementId, fileName) {
        const element = document.getElementById(elementId);
        const downloadBtnWrapper = element.querySelector('.btn-download-wrapper');
        
        downloadBtnWrapper.style.display = 'none'; // 버튼 숨김
        const originalText = event.target.innerText;
        event.target.innerText = "고화질 이미지 생성 중...";

        html2canvas(element, {
            scale: 2, // 고해상도
            useCORS: true,
            allowTaint: true,
            backgroundColor: null, // 배경색 투명 처리 (CSS 배경 유지)
            scrollY: -window.scrollY,
            // SVG 필터 렌더링을 위한 옵션
            ignoreElements: (node) => node.nodeName === 'IFRAME'
        }).then(canvas => {
            const image = canvas.toDataURL("image/png");
            const link = document.createElement('a');
            link.download = fileName;
            link.href = image;
            link.click();
            
            downloadBtnWrapper.style.display = 'block'; // 버튼 복구
            event.target.innerText = originalText;
        }).catch(err => {
             console.error("Error:", err);
             alert("이미지 생성 중 오류가 발생했습니다. 브라우저 호환성 문제일 수 있습니다.");
             downloadBtnWrapper.style.display = 'block';
             event.target.innerText = originalText;
        });
    }

    window.onload = function() { setTimeout(updateDocuments, 500); };
</script>

</body>
</html>
